# Прототип системы вертикального поиска по услугам такси города Москвы

## Постановка задачи

Функциональные и иные требования в формате PDF доступны [здесь](https://github.com/unitymind/cheap-taxi/blob/master/doc/aviasales.pdf?raw=true)

## Сбор данных и их структура

Тестовые данные должны более-менее реалистичными, а их структура - максимально соответствовать реальному миру.

### Реальные данные
В качестве источника данных о Москве использован сайт [http://mosopen.ru](http://mosopen.ru).
Получены:

* административные округа
* районы, входящие в административные округа
* станции метро и к каким районам они относятся
* площадь районов и численность жителей
* для каждого района собрана информация о граничащих с ним районах (необходимо для построения кратчайших маршрутов)

Зеленоградский округ исключен, так как его районы не имеют границ с другими районами, кроме входящих в это же округ.
Расчет маршрутов и тарифов невозможен для этих районов.

В качестве источника данных о таксомоторных службах использован сайт [http://taxodrom.ru](http://taxodrom.ru).
Получены:

* Названия компаний
* Веб-сайт
* Телефоны
* Типы используемых автомобилей и их класс (эконом, бизнес, VIP)

На основе данных о граничащих районах был построен двунаправленный граф, где в качестве веса ребра задается среднее
значение площади (в гектарах) двух районов, которые это ребро соединяет.

Этот граф используется для вычисления кратчайшего пути из одного района в другой по алгоритму Дейкстра (таким образом, для 120 районов Москвы
получили 120*120 - 120 = 14280 кратчайших маршрутов).

Операция выполняется один раз и сохраняется в базе как своеобразный
кеш маршрутов, при это расчитанное расстояние для маршрута из гектаров переводится в километры квадратные, затем делится на 2 -
получаем длину маршрута в километрах.

Проверка длины маршрута в Google Maps подтвердила схожесть порядка полученных расстояний - приближенность к реальным величинам соблюдена.

### Сгенерированные данные

Каждая компания помечается как обслуживающая 30-35 райнов Москвы (имеющая там свои автомобили постоянно), выбранных случайно.
При поиске компаний для обслуживания заказа, выбираются те, которые присутствуют в районе начала маршрута. Сделано допущение,
 что такие компании способны подать автомобиль наиболее быстро, предложив меньшую стоимость поездки (нет накладных расходов
 на проезд автомобиля до места начала маршрута).
